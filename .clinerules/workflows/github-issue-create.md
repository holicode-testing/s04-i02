<!--
workflow_meta:
  name: "GitHub Issue Creator"
  description: "Creates a new GitHub issue (epic, story, or task) using a flexible template."
  category: "GitHub Integration"
  version: "0.1.0"
  inputs:
    - name: ticket_type
      type: string
      description: "Type of GitHub issue (epic, story, task)"
      required: true
    - name: ticket_title
      type: string
      description: "Title of the GitHub issue"
      required: true
    - name: ticket_description
      type: string
      description: "Detailed description for the GitHub issue"
      required: true
    - name: ticket_labels
      type: array
      description: "Array of labels for the GitHub issue (e.g., ['epic', 'bug'])"
      required: true
    - name: ticket_assignee
      type: string
      description: "GitHub username to assign the issue to (optional)"
      required: false
    - name: epic_business_value
      type: string
      description: "Business value for an epic (required if ticket_type is 'epic')"
      required: false
    - name: epic_success_criteria_1
      type: string
      description: "First success criteria for an epic (required if ticket_type is 'epic')"
      required: false
    - name: epic_success_criteria_2
      type: string
      description: "Second success criteria for an epic (required if ticket_type is 'epic')"
      required: false
    - name: user_type
      type: string
      description: "User type for a user story (required if ticket_type is 'story')"
      required: false
    - name: functionality
      type: string
      description: "Functionality for a user story (required if ticket_type is 'story')"
      required: false
    - name: benefit
      type: string
      description: "Benefit for a user story (required if ticket_type is 'story')"
      required: false
    - name: story_ac_1
      type: string
      description: "First acceptance criteria for a user story (required if ticket_type is 'story')"
      required: false
    - name: story_ac_2
      type: string
      description: "Second acceptance criteria for a user story (required if ticket_type is 'story')"
      required: false
    - name: task_component
      type: string
      description: "Component for a task (required if ticket_type is 'task')"
      required: false
    - name: task_subtask_1
      type: string
      description: "First subtask for a task (required if ticket_type is 'task')"
      required: false
    - name: task_subtask_2
      type: string
      description: "Second subtask for a task (required if ticket_type is 'task')"
      required: false
    - name: repo_owner
      type: string
      description: "Owner of the GitHub repository"
      required: true
    - name: repo_name
      type: string
      description: "Name of the GitHub repository"
      required: true
-->

## Workflow Steps

### 1. Generate Issue Body from Template

This step would typically involve rendering the `templates/github/ticket-create.md` with the provided inputs. For now, we'll use a simplified placeholder.

```bash
# In a real scenario, this would use a templating engine
# For now, we'll construct a basic body
issue_body=$(cat <<EOF
{{ticket_description}}

Generated by HoliCode:
Type: {{ticket_type}}
EOF
)

# Add conditional content based on ticket_type (simplified for placeholder)
if [ "{{ticket_type}}" = "epic" ]; then
    issue_body+="
## Epic Details
Business Value: {{epic_business_value}}
Success Criteria:
- {{epic_success_criteria_1}}
- {{epic_success_criteria_2}}"
elif [ "{{ticket_type}}" = "story" ]; then
    issue_body+="
## User Story
As a {{user_type}} I want {{functionality}} so that {{benefit}}
Acceptance Criteria:
- {{story_ac_1}}
- {{story_ac_2}}"
elif [ "{{ticket_type}}" = "task" ]; then
    issue_body+="
## Implementation Details
Component: {{task_component}}
Subtasks:
- {{task_subtask_1}}
- {{task_subtask_2}}"
fi

echo "$issue_body" > /tmp/holicode_issue_body.md
```

### 2. Create GitHub Issue via MCP

<use_mcp_tool>
<server_name>github</server_name>
<tool_name>create_issue</tool_name>
<arguments>
{
  "owner": "{{repo_owner}}",
  "repo": "{{repo_name}}",
  "title": "{{ticket_title}}",
  "body": "$(cat /tmp/holicode_issue_body.md)",
  "labels": "{{ticket_labels}}",
  "assignees": "{{ticket_assignee}}"
}
</arguments>
</use_mcp_tool>

### 3. Clean up temporary file

```bash
rm /tmp/holicode_issue_body.md
```

### 4. Update HoliCode State (Placeholder)

This step would update `activeContext.md` and `github-mapping.md` with the newly created issue's details.

```bash
echo "Placeholder: Update HoliCode state with new issue details (issue ID, URL)."
